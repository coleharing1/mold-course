(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{1441:function(e,r,s){Promise.resolve().then(s.bind(s,9395))},9395:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return x}});var t=s(7437),a=s(2265),n=s(9376),i=s(7648),l=s(2869),c=s(6070),d=s(9322),o=s(1671),u=s(2660);function m(){let e=(0,n.useRouter)(),r=(0,n.useSearchParams)().get("token"),[s,m]=(0,a.useState)(""),[x,f]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),[g,y]=(0,a.useState)(""),[b,j]=(0,a.useState)(!1),[w,N]=(0,a.useState)(!1),v=async e=>{e.preventDefault(),N(!0),y("");try{let e=await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})}),r=await e.json();if(!e.ok)throw Error(r.error||"Failed to send reset email");j(!0)}catch(e){y(e.message||"An error occurred. Please try again.")}finally{N(!1)}},P=async s=>{if(s.preventDefault(),N(!0),y(""),x!==h){y("Passwords do not match"),N(!1);return}if(x.length<8){y("Password must be at least 8 characters long"),N(!1);return}try{let s=await fetch("/api/auth/reset-password/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r,password:x})}),t=await s.json();if(!s.ok)throw Error(t.error||"Failed to reset password");j(!0),setTimeout(()=>{e.push("/signin")},2e3)}catch(e){y(e.message||"An error occurred. Please try again.")}finally{N(!1)}};return"request"==(r?"reset":"request")?(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 px-4 py-12 sm:px-6 lg:px-8",children:(0,t.jsxs)(c.Zb,{className:"w-full max-w-md",children:[(0,t.jsxs)(c.Ol,{className:"space-y-1",children:[(0,t.jsx)(c.ll,{className:"text-center text-2xl font-bold",children:"Reset Password"}),(0,t.jsx)(c.SZ,{className:"text-center",children:"Enter your email address and we'll send you a reset link"})]}),(0,t.jsxs)("form",{onSubmit:v,children:[(0,t.jsxs)(c.aY,{className:"space-y-4",children:[g&&(0,t.jsxs)("div",{className:"flex items-center gap-2 rounded-md bg-red-50 p-3 text-sm text-red-800",children:[(0,t.jsx)(d.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:g})]}),b&&(0,t.jsxs)("div",{className:"flex items-center gap-2 rounded-md bg-green-50 p-3 text-sm text-green-800",children:[(0,t.jsx)(o.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Check your email for a password reset link"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),(0,t.jsx)("input",{id:"email",type:"email",placeholder:"you@example.com",value:s,onChange:e=>m(e.target.value),required:!0,disabled:b,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm placeholder-gray-400 focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 disabled:bg-gray-100"})]})]}),(0,t.jsxs)(c.eW,{className:"flex flex-col space-y-4",children:[(0,t.jsx)(l.z,{type:"submit",className:"w-full",disabled:w||b,children:w?"Sending...":"Send Reset Link"}),(0,t.jsxs)(i.default,{href:"/signin",className:"flex items-center justify-center text-sm text-gray-600 hover:text-gray-900",children:[(0,t.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),"Back to sign in"]})]})]})]})}):(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 px-4 py-12 sm:px-6 lg:px-8",children:(0,t.jsxs)(c.Zb,{className:"w-full max-w-md",children:[(0,t.jsxs)(c.Ol,{className:"space-y-1",children:[(0,t.jsx)(c.ll,{className:"text-center text-2xl font-bold",children:"Set New Password"}),(0,t.jsx)(c.SZ,{className:"text-center",children:"Enter your new password below"})]}),(0,t.jsxs)("form",{onSubmit:P,children:[(0,t.jsxs)(c.aY,{className:"space-y-4",children:[g&&(0,t.jsxs)("div",{className:"flex items-center gap-2 rounded-md bg-red-50 p-3 text-sm text-red-800",children:[(0,t.jsx)(d.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:g})]}),b&&(0,t.jsxs)("div",{className:"flex items-center gap-2 rounded-md bg-green-50 p-3 text-sm text-green-800",children:[(0,t.jsx)(o.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Password reset successfully! Redirecting to sign in..."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"password",className:"text-sm font-medium",children:"New Password"}),(0,t.jsx)("input",{id:"password",type:"password",placeholder:"••••••••",value:x,onChange:e=>f(e.target.value),required:!0,minLength:8,disabled:b,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm placeholder-gray-400 focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 disabled:bg-gray-100"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Must be at least 8 characters"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"text-sm font-medium",children:"Confirm New Password"}),(0,t.jsx)("input",{id:"confirmPassword",type:"password",placeholder:"••••••••",value:h,onChange:e=>p(e.target.value),required:!0,disabled:b,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm placeholder-gray-400 focus:border-primary-500 focus:outline-none focus:ring-1 focus:ring-primary-500 disabled:bg-gray-100"})]})]}),(0,t.jsx)(c.eW,{children:(0,t.jsx)(l.z,{type:"submit",className:"w-full",disabled:w||b,children:w?"Resetting...":"Reset Password"})})]})]})})}function x(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:(0,t.jsx)("div",{className:"text-gray-500",children:"Loading..."})}),children:(0,t.jsx)(m,{})})}},2869:function(e,r,s){"use strict";s.d(r,{z:function(){return c}});var t=s(7437),a=s(4508),n=s(2265);let i={primary:"bg-primary-600 text-white hover:bg-primary-700 focus-visible:ring-primary-600",secondary:"bg-secondary-600 text-white hover:bg-secondary-700 focus-visible:ring-secondary-600",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus-visible:ring-gray-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus-visible:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-600"},l={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},c=(0,n.forwardRef)((e,r)=>{let{children:s,className:n,variant:c="primary",size:d="md",fullWidth:o=!1,loading:u=!1,disabled:m,...x}=e;return(0,t.jsxs)("button",{ref:r,className:(0,a.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50",i[c],l[d],o&&"w-full",n),disabled:m||u,...x,children:[u&&(0,t.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s]})});c.displayName="Button"},6070:function(e,r,s){"use strict";s.d(r,{Ol:function(){return c},SZ:function(){return o},Zb:function(){return l},aY:function(){return u},eW:function(){return m},ll:function(){return d}});var t=s(7437),a=s(4508);let n={default:"bg-white",bordered:"bg-white border border-gray-200",elevated:"bg-white shadow-lg"},i={none:"",sm:"p-4",md:"p-6",lg:"p-8"};function l(e){let{children:r,className:s,variant:l="bordered",padding:c="md"}=e;return(0,t.jsx)("div",{className:(0,a.cn)("rounded-lg",n[l],i[c],s),children:r})}function c(e){let{children:r,className:s}=e;return(0,t.jsx)("div",{className:(0,a.cn)("border-b border-gray-200 pb-4",s),children:r})}function d(e){let{children:r,className:s}=e;return(0,t.jsx)("h3",{className:(0,a.cn)("text-lg font-semibold text-gray-900",s),children:r})}function o(e){let{children:r,className:s}=e;return(0,t.jsx)("p",{className:(0,a.cn)("mt-1 text-sm text-gray-600",s),children:r})}function u(e){let{children:r,className:s}=e;return(0,t.jsx)("div",{className:(0,a.cn)("pt-4",s),children:r})}function m(e){let{children:r,className:s}=e;return(0,t.jsx)("div",{className:(0,a.cn)("mt-4 border-t border-gray-200 pt-4",s),children:r})}},4508:function(e,r,s){"use strict";s.d(r,{cn:function(){return n}});var t=s(334),a=s(2997);function n(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,a.m6)((0,t.W)(r))}},2660:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9322:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(9205).Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},1671:function(e,r,s){"use strict";s.d(r,{Z:function(){return t}});let t=(0,s(9205).Z)("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9376:function(e,r,s){"use strict";var t=s(5475);s.o(t,"useParams")&&s.d(r,{useParams:function(){return t.useParams}}),s.o(t,"usePathname")&&s.d(r,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(r,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(r,{useSearchParams:function(){return t.useSearchParams}})}},function(e){e.O(0,[216,184,971,117,744],function(){return e(e.s=1441)}),_N_E=e.O()}]);